<!DOCTYPE HTML>
<html>
<head>
	<link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='styles/graphics.css') }}">
	<link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='styles/bootstrap.css') }}">
</head>
<body>
	<nav class="navbar navbar-expand-lg bg-dark">
		<div class="container-fluid">
			<a class="navbar-brand" style="color:white;" href="{{ url_for('home') }}">Home</a>
			<ul class="navbar-nav me-auto mb-2 mb-lg-0">
				<li class="nav-item">
					<a class="nav-link" style="color:white;" href="{{ url_for('loginPage') }}">Login</a>
				</li>
			</ul>
			<form class="d-flex" action="http://127.0.0.1:5000/LocationReceiver" method="post">
				<input id="locationSelect" name="locationSelect" class="form-control me-2" type="search" placeholder="Search">
				<button class="btn btn-outline-success" type="submit">Search</button>
			</form>
		</div>
	</nav>
	<div class="card" style="width: 16.5rem; opacity: 80%; margin: 25px 25px 25px 25px; float:left;">
		<div class="card-body">
			<h5 class="card-title" id="locationA">Hello</h5>
		</div>
	</div>
	<div class="geoChart" id="geoChart"></div>
	<div class="card" style="width: 16.5rem; opacity: 80%; margin: 25px 25px 25px 25px; float:left;">
		<div class="card-body">
			<h5 class="card-title" id="locationB">Hello</h5>
		</div>
	</div>
	<script type="text/javascript" src="https://www.google.com/jsapi"></script>
	<script>
		google.charts.load('visualization', {'packages':['geochart'],'mapsApiKey': 'MY_KEY'});
		google.charts.setOnLoadCallback(drawLocationsMap);
		var post = {{ post|tojson }};
		document.getElementById('locationA').innerHTML = post.locationNames[0];
		document.getElementById('locationB').innerHTML = post.locationNames[1];
		function drawLocationsMap() {
			var post = {{ post|tojson }};
			data = [['City','Sample count']];
			for(var i=0; i < post.sampleCounts.length; i++){
				data.push([post.locationNames[i],post.sampleCounts[i]]);
			}
			console.log(data);
			var dataTable = google.visualization.arrayToDataTable(data);
			var options = {
				title: 'Geo map',
				sizeAxis: {minValue: 0, maxSize: 15},
				region: 'world',
				displayMode: 'markers',
				markerOpacity: 0.8,
				legend: {texStyle: {color: 'black', fontSize: 16}},
				colorAxis: {colors: ['yellow', 'purple']}
			};
			var chart = new google.visualization.GeoChart(document.getElementById('geoChart'));
			chart.draw(dataTable, options);
		}
	</script>
</body>
</html>