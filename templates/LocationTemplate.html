<!DOCTYPE HTML>
<html>
<head>
	<link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='styles/graphics.css') }}">
	<link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='styles/minuteCast.css') }}">
</head>
<body>
	<div class="navigationBar">
		<a href="{{ url_for('home') }}">Home</a>
		<a href="#HourCast">Hourly Forecast</a>
		<a href="#DailyCast">Daily Forecast</a>
		<a href="{{ url_for('loginPage') }}">Login</a>
	</div>
	<div class="navbackground"></div>
	<div class="summaryBox">
		<a id="location"></a>
		<p id = "temperature" class="info"></p>
		<p id = "pressure" class="info"></p>
	</div>
	<div class="display">
		<ul id="listTimestamp">
			<li>Time</li>
		</ul>
		<ul id="listTemperatures">
			<li>Temperature/Celsius</li>
		</ul>
		<ul id="listPressures">
			<li>Pressure/hPa</li>
		</ul>
	</div>
	<table class="charts-css bar" id="MinuteCastTemp"></table>
	<script>
		var displayTemperatureList = document.getElementById("listTemperatures");
		var displayPressureList = document.getElementById("listPressures");
		var displayTimeList = document.getElementById("listTimestamp");
		var temperatureValue = document.getElementById("temperature");
		var pressureValue = document.getElementById("pressure");
		var locationDisplay = document.getElementById("location");
		var data = {{ data|tojson }}
		var locationName = {{ location|tojson }}
		var time = {{ time|tojson }}
		function colorBoundaries(value, point, lowBoundary, midBoundary, highBoundary){
			if (value < 15){
					point.className = "low";
				} else if (value >= lowBoundary & value < midBoundary){
					point.className = "medium";
				} else if (value >= midBoundary & value < highBoundary){
					point.className = "high";
				} else{
					point.className = "veryHigh";
				}
		}
		for(var i = 0; i < data[0].length-1; i++){
			var temperaturePoint = document.createElement("li");
			var timestampPoint = document.createElement("li");
			var pressurePoint = document.createElement("li");
			if (typeof data[0][0] == "number"){
				predictedTemperature = data[0][i+1].toFixed(2);
				predictedPressure = data[1][i+1].toFixed(2);
				temperaturePoint.innerHTML = predictedTemperature;
				pressurePoint.innerHTML = predictedPressure;
				colorBoundaries(predictedTemperature, temperaturePoint, 15, 25, 30);
				colorBoundaries(predictedPressure, pressurePoint, 1000, 1013, 1030);
				displayTemperatureList.appendChild(temperaturePoint);
				displayPressureList.appendChild(pressurePoint);
			}
			timestampPoint.innerHTML = time[i];
			displayTimeList.appendChild(timestampPoint);
		}
		if (typeof(data[0][0]) == "number"){
			temperatureValue.innerHTML = "Temperature : "+data[0][0].toFixed(2);
			pressureValue.innerHTML = "Pressure : "+data[1][0].toFixed(2)+" hPa";
		}
		locationDisplay.innerHTML = locationName;
	</script>
</body>
</html>